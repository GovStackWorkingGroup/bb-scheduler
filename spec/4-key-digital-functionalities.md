# 4 Key Digital Functionalities

## **Current scope:**

The functional requirements to cover the services required from the Scheduler BB currently have considered specific use cases of consultation appointment booking, periodic payment calculation and payment processing triggering in Post-Partum and Child Care program. The considerations can be generalized for different type of events involving one or more participants.&#x20;

The scheduler building block MUST provide scheduling related services for coordinating time-based activities among other building blocks/applications/devices/people by sending appropriate alert notifications to them at appropriate times. These services MUST be exposed through RESTful API interfaces as defined by OpenAPI v3+ standards.

The Scheduler MUST have any response data payload it returns through its API only in the form of JSON formatted datasets. It is left to the application consuming the response to present it appropriately (e.g. as a Event list or calendar) and provision for associated UI interactions.

The scheduler building block allows configuration of a single event at a time. Even if the same event is to repeated on different date-times, the  location, resources and subscribers need not be same. Hence the application MUST schedule each instance of the event separately.

The scheduler must allow administrators to access information (events, resources, subscribers, alerts, etc.) related to their entity only

The scheduler building block MUST enable usage from following actors,&#x20;

* "BB\_Admin" who manages this building block to run efficiently in a hosted environment
* "Organizer" who manages event schedules with associated participants and alerts
* "Resources" (personnel, facilities, equipment) to deliver a specific service during the event
* "Subscribers" (personnel, facilities, equipment) to receive services during the event.&#x20;
* The internal storage of the Scheduler building block MUST hold configuration, status and logged information of all scheduled events. It MUST also maintain a repository of details of resources and subscribers affiliated to various events

The Key digital functionalities that are considered within current scope of the specifications to support automation of event management in different phases are listed below:

1. **Event Management:**  Authorized organizers of a host entity (such as health workers / admins / etc.)must be abled to create and manage schedules of events involving several resources, subscribers and activities that have to be reminded/triggered/informed through alerts at appropriate times before/during/after the event. Each event schedule will contain under a unique Event\_Id, details such as description of the event, which entity is hosting the event, when is the event starting and ending, how many subscribers are allowed, terms of subscription, current status of the event, deadlines for getting attendance from participants, etc. Schedules of multiple events can be configured, tracked and managed, avoiding  any duplication.&#x20;
2. **Alert Management:** Authorized organizers of a host entity may schedule one or more alerts to be sent to specific resources/subscribers of an event before, during or after an event. It also provides for the mechanism to send alert messages according to preferred Alerting mode (through IM to a target Building block/ application URL end point, or publish it in its local IM+PUBSUB module or through messaging Building Block. Every alert sent is tagged for tracking status updates from alerted parties (for example an event started/ended/no show/etc.). It must be possible to  create a stack of message templates that be reused in one or more notifications in multiple Events hosted by the same entity.
3. **Resource  management:** Authorized organizers of a host entity may enroll different resources resource (persons, facilities, equipment, vehicle, etc.)into respective entities. This scheduler retains the Resource details such as its name, category (doctor/nurse/teacher/health-worker/admin/etc.), contact details (phone/mail/url), etc., against a unique event id for each Resource.  The scheduler allows multiple entities register the same resource and affiliate the same resource to multiple entities with non-overlapping week days and working hours. (e.g. a doctor may work at different hospitals on specific days and time spans). The organizer may allocate their resources for multiple non-overlapping events within working hour zones of their affiliated entities. (e.g. a doctors could provide consultation to a series of patients during their workhours at a specific hospital). Organizers may look for resources which are free(unallocated) together in a chosen date-time range, or look for time-zones when chosen resources are free together.
4. **Subscription management:** Multiple subscribers may be enrolled into a specific event and a given subscriber may be enrolled in multiple events. Organizers may search for scheduled events within a preferred date-time range which have not hit their subscriber limit yet, and  enroll a subscriber into a chosen event thereof. The scheduler stores the subscriber contact details against a unique Id in such a way the same subscriber can be identified and affiliated with different token ids when subscribed into different events, without replication of subscriber's details. In use cases where the subscriber is a target device/software, the admin of this BB is expected to allocate the subscriber into a specific. In case the subscriber is a person, the person can self-subscribe into a chosen event or take assistance from an authorized third party (e.g. health-worker or a call-center admin) to subscribe into a chosen event. IT must be possible for authorized resources of host entities to update changes to the subscriber details and cancel subscription to specific events hosted by their respective entity.
5. **Schedule Tracking and Alerting:**  Once an event is scheduled, the scheduler internally tracks all associated alerts scheduled for the event and sends corresponding alert messages to target users and systems at appropriate times, based on respective alert schedule. It will run as an independent process thread with capability to track thousands of parallel events and generate heterogenous notifications. Based on the alert configuration, this block can route the alert messages to a target URL endpoint through IM or through a Pub sub room or through the messaging building block. Each alert sent is tagged with a unique token from Scheduler so that it can be related to further acknowledgements and status updates received from recipients of the alerts. The alerted building block/app can take appropriate actions based on the alert message and may update status back to an end point on the scheduler along with the token either synchronously or asynchronously along with the token. The scheduler can also poll for status updates, by giving the unique token of specific alert it sent.
6. **Status Logging and Reporting:** This subblock maintains logs of user driven transactions, activities originated from this BB as well as status updates coming from external sources. All logs contain a date time stamp, an optional location stamp, details of information source and the status of transaction. For example, the Scheduler can log all alerts its generates and all events that are created/updated/cancelled. It can also log status updates from external BBs or applications (e.g. completion of an event) coming through IM or pub sub or messaging BB interfaces. In some implementations, some subscriber users or systems may also generate acknowledgement of having received alerts from the scheduler within a certain period of time, failing which a rule may force the scheduler to resend the trigger/notification for a given number of retries before logging a communication success or failure. The Scheduler may also monitor and log internal metrics (e.g. latency/ capacity utilization/ communication failures/etc.) to help in maintenance and capacity management. The security implementation of the Building block may also log any security threats or faults detected in the system. An authorized administrator may use this block to report different sets of logged information in response to specific queries over a chosen date range.  For example, an auditing application may query logged information or statistical indicators thereof to monitor transactional load/performance/compliance to Schedule/ spanning across events. The Scheduler does not retain any reports its generates in response to the queries, it only maintains  raw logs and produces reports on demand. It logs the transaction that it did give a report to a specific requestor&#x20;

## **Out of scope:** <a href="#_heading-h.qsh70q" id="_heading-h.qsh70q"></a>

The scheduler BB will provide following key digital functionalities to support automation of event management in different phases:

1. The scheduler can be used to trigger activities based on time only. Evaluation of any criteria other than time-based evaluations for generation of a trigger is out of scope.&#x20;
2. Alerts based purely on human decision are out of scope.
3. Any logical evaluations prior to onset of alerting applications or building blocks is out of scope. The application / building block MUST implement their own logic to evaluate other conditions before taking action based on an alert. (e.g., the accounts application may check whether a payroll has been approved before initiating payments, when alerted by the scheduler to initiate salary payments).&#x20;

**Future scope:**
